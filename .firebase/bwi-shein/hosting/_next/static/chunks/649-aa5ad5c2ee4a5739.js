"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[649],{16694:function(t,e,i){var r=i(57437);i(2265),e.Z=t=>{let{className:e,icon:i}=t;return(0,r.jsx)("i",{className:"w-fit flex items-center  ".concat(e," ").concat(i)})}},30999:function(t,e,i){i.d(e,{UT:function(){return v},WT:function(){return u},Xq:function(){return y},_7:function(){return d},a3:function(){return m},h2:function(){return h},mc:function(){return g}});var r=i(23825),c=i(10947),n=i(76243),a=i(53687),o=i(24086),p=i(68450);let s={cart:[]};function d(t){let{product:e,productID:i,quantity:r=1}=t,c={name:e.prodName,quantity:r||1,img:e.coverPic,productId:i,commentMsg:"",commentImgs:[],maxQty:e.maxQty?e.maxQty:0,minQty:e.minQty?e.minQty:1,gst:e.gst?e.gst:0,status:void 0===e.status||e.status,stopWhenNoQty:!!e.hasOwnProperty("stopWhenNoQty")&&void 0!==e.stopWhenNoQty&&e.stopWhenNoQty,totalQty:e.productQty?e.productQty:"",hsn:e.hsnCode?e.hsnCode:"",sku:e.productCode?e.productCode:"",barcode:e.barcode?e.barcode:"",shippingWt:e.shippingWeight||0,barcodeNo:e.barcodeNo||"",gstExclusive:e.gstExclusive||!1,extraCharges:"extraCharges"in e&&"object"==typeof e.extraCharges&&e.extraCharges.active?e.extraCharges:{charge:0},isCod:!("isCod"in e)||e.isCod,vendorId:e.vendorId||"",priceSlabs:"priceSlabs"in e?e.priceSlabs:{active:!1},templateId:e.templateId||""},a=(0,n.Gq)(e.prodDesc);return c.description=a,e.discountedPrice&&e.discountedPrice!==e.prodPrice?(c.mrpPrice=e.prodPrice,c.price=e.discountedPrice):c.price=e.prodPrice,e.hasOwnProperty("color")&&e.color.hasOwnProperty("name")&&(c.color=e.color),"child"===e.ptype&&(c.parentProductId=e.parentId),e.productType&&(c.orderType=e.productType,"quotation"===e.productType&&(c.price=0,c.mrpPrice=0)),c=(0,n.JA)(c,e)}function u(t){let{product:e,index:i,quantity:r=1}=t,c={name:e.prodName,quantity:r||1,img:(0,n.NV)(e,i),description:e.priceList[i].weight,commentMsg:"",commentImgs:[],maxQty:e.maxQty?e.maxQty:0,minQty:e.minQty?e.minQty:1,gst:e.gst?e.gst:0,status:void 0===e.status||e.status,stopWhenNoQty:!!e.hasOwnProperty("stopWhenNoQty")&&void 0!==e.stopWhenNoQty&&e.stopWhenNoQty,totalQty:e.priceList[i].totalQuantity?e.priceList[i].totalQuantity:"",hsn:e.hsnCode?e.hsnCode:"",sku:"sku"in e.priceList[i]&&""!=e.priceList[i].sku?e.priceList[i].sku:e.productCode?e.productCode:"",barcode:e.priceList[i].barcode?e.priceList[i].barcode:"",shippingWt:e.priceList[i].shippingWeight||0,barcodeNo:e.priceList[i].barcodeNo||"",gstExclusive:e.gstExclusive||!1,extraCharges:"extraCharges"in e&&"object"==typeof e.extraCharges&&e.extraCharges.active?e.extraCharges:{charge:0},isCod:!("isCod"in e)||e.isCod,vendorId:e.vendorId||"",priceSlabs:"priceSlabs"in e?e.priceSlabs:{active:!1},templateId:e.templateId||"",pack:{weight:e.priceList[i].weight,variantType:e.variantType?e.variantType:"variant"}};return e.variantType&&"pieces"===e.variantType?e.priceList[i].discountedPrice&&e.priceList[i].discountedPrice!==e.priceList[i].price?(c.mrpPrice=e.priceList[i].price*parseInt(e.priceList[i].weight),c.price=e.priceList[i].discountedPrice*parseInt(e.priceList[i].weight),c.pack.price=e.priceList[i].discountedPrice*parseInt(e.priceList[i].weight),c.pack.perPcPrice=e.priceList[i].discountedPrice):(c.price=e.priceList[i].price*parseInt(e.priceList[i].weight),c.pack.price=e.priceList[i].price*parseInt(e.priceList[i].weight),c.pack.perPcPrice=e.priceList[i].price):e.priceList[i].discountedPrice&&e.priceList[i].discountedPrice!==e.priceList[i].price?(c.mrpPrice=e.priceList[i].price,c.price=e.priceList[i].discountedPrice,c.pack.price=e.priceList[i].discountedPrice):(c.price=e.priceList[i].price,c.pack.price=e.priceList[i].price),e.hasOwnProperty("color")&&e.color.hasOwnProperty("name")&&(c.color=e.color),e.parentProductId&&(c.parentProductId=e.parentProductId),c.productId=e.id,e.productType&&(c.orderType=e.productType,"quotation"===e.productType&&(c.price=0,c.mrpPrice=0,c.pack.price=0)),c=(0,n.JA)(c,e)}let l=(0,r.oM)({name:"cartSlice",initialState:s,reducers:{reset:()=>s,initializeCart:(t,e)=>{t.cart=e.payload},addToCart:(t,e)=>{var i;let r=t.cart;r.push(e.payload),t.cart=r,(null===(i=a.I8.currentUser)||void 0===i?void 0:i.uid)||localStorage.setItem("cart",JSON.stringify(r))},removeFromCart:(t,e)=>{var i,r;let{product:n,productID:o,index:s,isPriceList:d}=e.payload,u=null===(i=(0,c.Vk)(t))||void 0===i?void 0:i.cart,l=d?u.findIndex(t=>{var e;return(null==t?void 0:t.productId)===o&&(null==t?void 0:t.description)===(null==n?void 0:null===(e=n.priceList[s])||void 0===e?void 0:e.weight)}):u.findIndex(t=>(null==t?void 0:t.productId)===o),y=u[l]||null,h=d?u.filter(t=>{var e;return(null==t?void 0:t.productId)!==o&&(null==t?void 0:t.description)!==(null==n?void 0:null===(e=n.priceList[s])||void 0===e?void 0:e.weight)}):u.filter(t=>(null==t?void 0:t.productId)!==o);t.cart=h,(null===(r=a.I8.currentUser)||void 0===r?void 0:r.uid)?y&&(null==y?void 0:y.id)&&(0,p.Zg)(null==y?void 0:y.id):localStorage.setItem("cart",JSON.stringify(h))},updateCartItemQuantity:(t,e)=>{var i,r,c,n,p,s;let{type:d,addedQty:u=1,index:l}=e.payload,y=t.cart;console.log({arr:y});let h=t.cart[l].quantity,g=(null===(i=t.cart[l])||void 0===i?void 0:i.id)||"";"inc"===d?y[l]={...y[l],quantity:"inc"==d?t.cart[l].quantity+u:t.cart[l].quantity-u}:h-u<u?y.splice(l,1):y[l]={...y[l],quantity:"inc"==d?t.cart[l].quantity+u:t.cart[l].quantity-u},t.cart=y,(null===(r=a.I8.currentUser)||void 0===r?void 0:r.uid)?g&&("inc"===d?(0,o.r7)((0,o.JU)(a.db,"users/".concat(null===(c=a.I8.currentUser)||void 0===c?void 0:c.uid,"/cart"),null===(n=y[l])||void 0===n?void 0:n.id),{quantity:"inc"===d?h+u:h-u}):h-u<u?(0,o.oe)((0,o.JU)(a.db,"users/".concat(null===(p=a.I8.currentUser)||void 0===p?void 0:p.uid,"/cart"),g)):(0,o.r7)((0,o.JU)(a.db,"users/".concat(null===(s=a.I8.currentUser)||void 0===s?void 0:s.uid,"/cart"),g),{quantity:"inc"===d?h+u:h-u})):localStorage.setItem("cart",JSON.stringify(y))}}}),{addToCart:y,removeFromCart:h,reset:g,initializeCart:v,updateCartItemQuantity:m}=l.actions;e.ZP=l.reducer},76243:function(t,e,i){i.d(e,{Gq:function(){return n},JA:function(){return a},Kf:function(){return s},NV:function(){return o},Zf:function(){return u},tw:function(){return p}});var r=i(24086),c=i(53687);function n(t){let e=t.replace(/(<([^>]+)>)/ig,""),i=document.createElement("textarea");return i.innerHTML=e,i.value}function a(t,e){if("priceSlabs"in e&&e.priceSlabs.active){if(e.isPriceList){let i=e.priceSlabs.variantSlabs||{};if(console.log("variantSlabs",i),Object.keys(i).length&&Object.keys(i).includes(t.pack.weight)){let e=i[t.pack.weight];if(console.log("slabs",e),e.length){let i={};for(let r of e)if(console.log("element",r),t.quantity>=r.qty[0]&&t.quantity<=r.qty[1]){i=r;break}Object.keys(i).length&&("pieces"===t.pack.variantType?(t.price=i.price*parseInt(t.pack.weight),t.pack.price=i.price*parseInt(t.pack.weight),t.mrpPrice=i.mrp*parseInt(t.pack.weight)):(t.price=i.price,t.pack.price=i.price,t.mrpPrice=i.mrp))}}}else{let i=e.priceSlabs.singleSlabs||{};if(Object.keys(i).length){let e={};for(let r of i)if(t.quantity>=r.qty[0]&&t.quantity<=r.qty[1]){e=r;break}Object.keys(e).length&&(t.price=e.price,t.mrpPrice=e.mrp)}}}return t}function o(t,e){let i=t.priceList[e];return"images"in i&&i.images.length?i.images[0]:t.coverPic}async function p(t){var e,i;let n=[],a=JSON.parse(localStorage.getItem("cart"));if(a&&(null==a?void 0:a.length)!=0&&(n=[...a]),(null===(e=c.I8.currentUser)||void 0===e?void 0:e.uid)||t){let e=(null===(i=c.I8.currentUser)||void 0===i?void 0:i.uid)||t.value,a=await (0,r.PL)((0,r.hJ)(c.db,"users/".concat(e,"/cart"))).then(t=>{if(0!==t.docs.length){let e=[];for(let i of t.docs)e.push({...i.data(),id:i.id});return e}return[]});if(a&&0!==a.length)for(let t of a)n.push(t)}return n}async function s(t){return console.log(t,"from updatedCartFromBackend"),new Promise(async(e,i)=>{try{let i=JSON.parse(JSON.stringify(t)),n=[],a=[];for(let t=0;t<i.length;t++){let e=await (0,r.QT)((0,r.JU)(c.db,"products",i[t].productId)).then(t=>t.exists?{...t.data(),id:t.id}:null);e&&(e.id=i[t].productId,n.push(e))}n.length&&(a=await d(n,i)),e(a)}catch(t){console.dir(t),e([])}})}async function d(t,e){return new Promise(async i=>{for(let i of e){let e=t.findIndex(t=>t.id===i.productId);if(-1!==e){let r=t[e];i.name=r.prodName,i.maxQty=r.maxQty?r.maxQty:0,i.minQty=r.minQty?r.minQty:1,i.status=!r.inactiveByVendor&&(r.status,r.status),i.stopWhenNoQty=!!r.hasOwnProperty("stopWhenNoQty")&&(r.stopWhenNoQty,!0)&&r.stopWhenNoQty,i.retailDiscount=r.hasOwnProperty("retailDiscount")?r.retailDiscount:0,i.retailDiscountType=r.retailDiscountType||"percentage",i.extraCharges="extraCharges"in r&&"object"==typeof r.extraCharges&&r.extraCharges.active?r.extraCharges:{charge:0},i.img=r.coverPic,i.hasOwnProperty("pack")?"pieces"!==i.pack.variantType?r.priceList.forEach(t=>{t.weight===i.pack.weight&&(i.totalQty=t.totalQuantity?t.totalQuantity:"",parseInt(t.totalQuantity)&&i.quantity>parseInt(t.totalQuantity)&&(i.quantity=parseInt(t.totalQuantity)),t.discountedPrice&&t.discountedPrice!==t.price?(i.price=t.discountedPrice,i.mrpPrice=t.price):i.price=t.price,i.pack.price=t.price)}):r.priceList.forEach(t=>{t.weight===i.pack.weight&&(i.totalQty=t.totalQuantity?t.totalQuantity:"",parseInt(t.totalQuantity)&&i.quantity>parseInt(t.totalQuantity)&&(i.quantity=parseInt(t.totalQuantity)),t.discountedPrice&&t.discountedPrice!==t.price?(i.price=t.discountedPrice*parseInt(t.weight),i.mrpPrice=t.price*parseInt(t.weight),i.pack.price=t.discountedPrice*parseInt(t.weight),i.pack.perPcPrice=t.discountedPrice):(i.price=t.price*parseInt(t.weight),i.pack.price=t.price*parseInt(t.weight),i.pack.perPcPrice=t.price))}):(i.totalQty=r.productQty?r.productQty:"",parseInt(r.productQty)&&i.quantity>parseInt(r.productQty)&&(i.quantity=parseInt(r.productQty)),r.discountedPrice&&r.discountedPrice!==r.prodPrice?(i.price=r.discountedPrice,i.mrpPrice=r.prodPrice):i.price=r.prodPrice)}else i.status=!1}i(e)})}async function u(){let t=(await (0,r.QT)((0,r.JU)(c.db,"payment","info"))).data();return!!t&&(null==t?void 0:t.isGstApplicable)}}}]);